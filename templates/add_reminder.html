{% extends "base.html" %}

{% block title %}Yeni AnÄ±msatÄ±cÄ± - Åirket Todo{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h4><i class="fas fa-bell"></i> Yeni AnÄ±msatÄ±cÄ± OluÅŸtur</h4>
            </div>
            <div class="card-body">
                <form method="POST" id="reminderForm">
                    <div class="mb-3">
                        <label for="title" class="form-label">AnÄ±msatÄ±cÄ± BaÅŸlÄ±ÄŸÄ± *</label>
                        <input type="text" class="form-control" id="title" name="title" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="description" class="form-label">AÃ§Ä±klama</label>
                        <textarea class="form-control" id="description" name="description" rows="3" 
                                  placeholder="AnÄ±msatÄ±cÄ± hakkÄ±nda detaylar..."></textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="reminder_date" class="form-label">Tarih *</label>
                                <input type="date" class="form-control" id="reminder_date" name="reminder_date" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="reminder_time" class="form-label">Saat</label>
                                <input type="time" class="form-control" id="reminder_time" name="reminder_time" value="09:00">
                            </div>
                        </div>
                    </div>
                    
                    <!-- HÄ±zlÄ± Tarih SeÃ§enekleri -->
                    <div class="mb-3">
                        <label class="form-label">HÄ±zlÄ± SeÃ§enekler:</label>
                        <div class="btn-group" role="group">
                            <button type="button" class="btn btn-outline-primary btn-sm" onclick="setQuickDate(0)">BugÃ¼n</button>
                            <button type="button" class="btn btn-outline-primary btn-sm" onclick="setQuickDate(1)">YarÄ±n</button>
                            <button type="button" class="btn btn-outline-primary btn-sm" onclick="setQuickDate(7)">1 Hafta</button>
                            <button type="button" class="btn btn-outline-primary btn-sm" onclick="setQuickDate(30)">1 Ay</button>
                        </div>
                    </div>
                    
                    <!-- HÄ±zlÄ± Saat SeÃ§enekleri -->
                    <div class="mb-3">
                        <label class="form-label">SÄ±k KullanÄ±lan Saatler:</label>
                        <div class="btn-group" role="group">
                            <button type="button" class="btn btn-outline-secondary btn-sm" onclick="setQuickTime('09:00')">09:00</button>
                            <button type="button" class="btn btn-outline-secondary btn-sm" onclick="setQuickTime('12:00')">12:00</button>
                            <button type="button" class="btn btn-outline-secondary btn-sm" onclick="setQuickTime('14:00')">14:00</button>
                            <button type="button" class="btn btn-outline-secondary btn-sm" onclick="setQuickTime('17:00')">17:00</button>
                            <button type="button" class="btn btn-outline-secondary btn-sm" onclick="setQuickTime('20:00')">20:00</button>
                        </div>
                    </div>
                    
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> AnÄ±msatÄ±cÄ± OluÅŸtur
                        </button>
                        <a href="{{ url_for('reminders') }}" class="btn btn-secondary">
                            <i class="fas fa-arrow-left"></i> Ä°ptal
                        </a>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- AnÄ±msatÄ±cÄ± Ä°puÃ§larÄ± -->
        <div class="card mt-4">
            <div class="card-header">
                <h6><i class="fas fa-lightbulb"></i> AnÄ±msatÄ±cÄ± Ä°puÃ§larÄ±</h6>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">ğŸ“‹ Etkili AnÄ±msatÄ±cÄ±lar:</h6>
                        <ul class="small">
                            <li>AÃ§Ä±k ve net baÅŸlÄ±klar kullanÄ±n</li>
                            <li>Ã–nemli detaylarÄ± aÃ§Ä±klama bÃ¶lÃ¼mÃ¼ne yazÄ±n</li>
                            <li>GerÃ§ekÃ§i tarih ve saatler belirleyin</li>
                            <li>DÃ¼zenli toplantÄ±lar iÃ§in tekrarlayan anÄ±msatÄ±cÄ±lar</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">â° Zaman YÃ¶netimi:</h6>
                        <ul class="small">
                            <li>Ã–nemli iÅŸler iÃ§in erken anÄ±msatÄ±cÄ±lar</li>
                            <li>GÃ¼nlÃ¼k rutinler iÃ§in sabit saatler</li>
                            <li>Proje deadlinelarÄ± iÃ§in haftalÄ±k hatÄ±rlatmalar</li>
                            <li>KiÅŸisel geliÅŸim iÃ§in dÃ¼zenli aralÄ±klar</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
$(document).ready(function() {
    // BugÃ¼nÃ¼n tarihini minimum tarih olarak ayarla
    const today = new Date().toISOString().split('T')[0];
    $('#reminder_date').attr('min', today);
    
    // VarsayÄ±lan olarak bugÃ¼nÃ¼ seÃ§
    $('#reminder_date').val(today);
});

// HÄ±zlÄ± tarih seÃ§imi
function setQuickDate(daysFromNow) {
    const date = new Date();
    date.setDate(date.getDate() + daysFromNow);
    const dateString = date.toISOString().split('T')[0];
    $('#reminder_date').val(dateString);
}

// HÄ±zlÄ± saat seÃ§imi
function setQuickTime(time) {
    $('#reminder_time').val(time);
}

// Form doÄŸrulama
$('#reminderForm').on('submit', function(e) {
    const selectedDate = new Date($('#reminder_date').val() + ' ' + $('#reminder_time').val());
    const now = new Date();
    
    if (selectedDate < now) {
        e.preventDefault();
        alert('AnÄ±msatÄ±cÄ± tarihi geÃ§miÅŸ bir zaman olamaz!');
        return false;
    }
    
    const title = $('#title').val().trim();
    if (title.length < 3) {
        e.preventDefault();
        alert('AnÄ±msatÄ±cÄ± baÅŸlÄ±ÄŸÄ± en az 3 karakter olmalÄ±dÄ±r!');
        $('#title').focus();
        return false;
    }
});

// Karakter sayacÄ±
$('#title').on('input', function() {
    const length = $(this).val().length;
    const maxLength = 200;
    
    if (length > maxLength - 20) {
        $(this).addClass('border-warning');
    } else {
        $(this).removeClass('border-warning');
    }
    
    if (length > maxLength) {
        $(this).addClass('border-danger');
    } else {
        $(this).removeClass('border-danger');
    }
});

$('#description').on('input', function() {
    const length = $(this).val().length;
    const maxLength = 500;
    
    if (length > maxLength - 50) {
        $(this).addClass('border-warning');
    } else {
        $(this).removeClass('border-warning');
    }
});
</script>
{% endblock %}
